{%- comment -%}
  Renders an Abhinaya product card.
  Accepts:
  - card_product: {Object} Product liquid object
  Usage: {% render 'abhinaya-card', card_product: product %}
{%- endcomment -%}
<a href="{{ card_product.url }}" class="abhinaya-card" aria-label="{{ card_product.title }}">
  <div class="abhinaya-card__img-wrap">
    {%- if card_product.featured_image != blank -%}
      <img
        src="{{ card_product.featured_image | image_url: width: 400 }}"
        srcset="{{ card_product.featured_image | image_url: width: 200 }} 200w, {{ card_product.featured_image | image_url: width: 400 }} 400w"
        sizes="(max-width: 767px) 45vw, 300px"
        alt="{{ card_product.featured_image.alt | escape }}"
        class="abhinaya-card__img"
        loading="lazy"
        width="400"
        height="533"
      >
    {%- else -%}
      <div class="abhinaya-card__img-placeholder">
        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#ccc" stroke-width="1"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg>
      </div>
    {%- endif -%}
    {%- if card_product.compare_at_price > card_product.price -%}
      {%- assign discount = card_product.compare_at_price | minus: card_product.price | times: 100 | divided_by: card_product.compare_at_price -%}
      <span class="abhinaya-card__discount">-{{ discount }}%</span>
    {%- endif -%}
    {%- if card_product.available == false -%}
      <span class="abhinaya-card__sold-out">Sold Out</span>
    {%- endif -%}
  </div>
  <div class="abhinaya-card__info">
    <h3 class="abhinaya-card__title">{{ card_product.title }}</h3>
    <div class="abhinaya-card__price-row">
      <span class="abhinaya-card__price">{{ card_product.price | money }}</span>
      {%- if card_product.compare_at_price > card_product.price -%}
        <span class="abhinaya-card__mrp">{{ card_product.compare_at_price | money }}</span>
      {%- endif -%}
    </div>
    {%- if card_product.metafields.custom.ready_to_ship -%}
      <span class="abhinaya-card__tag">Ready to ship</span>
    {%- endif -%}
  </div>
</a>
